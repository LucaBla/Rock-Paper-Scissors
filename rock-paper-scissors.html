<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>Rock, Paper, Scissors</title>
</head>
<body>

    <header>
        <h1>Rock-Paper-Scissors-Game</h1>
    </header>

    <div id="win-div">
        <p id="win-announcment"></p>
    </div>
    <div id='game'>
        <div id='player' class="players">
            <img src="./img/player.png" alt="" id='player-img'>
            <div class="buttons">
                <button id="rock" class="playerButtons"><img src="./img/rock.png" alt=""></button>
                <button id='paper' class="playerButtons"><img src="./img/paper.png" alt=""></button>
                <button id="scissors" class="playerButtons"><img src="./img/scissors.png" alt=""></button>
            </div>
        </div>

        <div id="info">
            <div id="results">
                <p id="player-stats">0</p>
                <p>VS</p>
                <p id="com-stats">0</p>
            </div>
            <div id="round-winner">

            </div>
        </div>

        <div id="com" class="players">
            <img src="./img/com.png" alt="" id='com-img'>
            <div class="buttons">
                <button id="com-rock"><img src="./img/rock.png" alt=""></button>
                <button id='com-paper'><img src="./img/paper.png" alt=""></button>
                <button id="com-scissors"><img src="./img/scissors.png" alt=""></button>
            </div>
        </div>
    </div>
    <footer>
        <div id='reference'>
            <a href="https://de.vecteezy.com/vektorkunst/693097-rock-paper-scissors-flache-symbole">Symbol Vektoren von Vecteezy</a>
            <a href="https://de.vecteezy.com/vektorkunst/4964515-im-nicht-mensch-roboter-vektor-illustration">Roboter Vektor von Vecteezy</a>
            <a href="https://de.vecteezy.com/vektorkunst/4959962-mann-mit-schutzmaske-und-blauem-anzug">Mann Vektor von Vecteezy</a>
        </div>
        <div id="creator">Made by me.</div>
        <div id="about-me">
            GitHub
            Instagram
            Facebook
        </div>
    </footer>

    <script>
        //the possible options for our game.
        let options = ['rock','paper','scissors'];
        let gameOver;

        //returns the option the computer picked.
        function computerPlay(){

            return options[Math.floor(Math.random()*options.length)];
        }

        //plays one round of our game.
        function playRound(playerSelection, computerSelection){
           
            let text = '';
            let result;

            if(gameOver) return;

            if (playerSelection === computerSelection){
                text = document.createTextNode(`Its a Tie! ${playerSelection} and ${computerSelection} are equal.`);
                result = 'tie';
            }
            else if (playerSelection === options[0] && computerSelection === options[1]){
                text = document.createTextNode(`You Lost! ${computerSelection} beats ${playerSelection}.`);
                result = 'lose';
            }
            else if (playerSelection === options[0]){
                text = document.createTextNode(`You Won! ${playerSelection} beats ${computerSelection}.`);
                result = 'win';
            }
            else if (playerSelection === options[1] && computerSelection === options[0]){
                text = document.createTextNode(`You Won! ${playerSelection} beats ${computerSelection}.`);
                result = 'win';
            }
            else if (playerSelection === options[1] && computerSelection === options[2]){
                text = document.createTextNode(`You Lost! ${computerSelection} beats ${playerSelection}.`);
                result = 'lose';
            }
            else if (playerSelection === options[2] && computerSelection === options[0]){
                text = document.createTextNode(`You Lost! ${computerSelection} beats ${playerSelection}.`);
                result = 'lose';
            }
            else if (playerSelection === options[2] && computerSelection === options[1]){
                text = document.createTextNode(`You Won! ${playerSelection} beats ${computerSelection}.`);
                result = 'win';
            }

            let winnerMessage;

            if(result === 'win'){
                let playerScore = document.getElementById('player-stats').textContent;
                let newPlayerScore = document.createElement("p");

                playerScore=parseInt(playerScore);
                playerScore++;
                if (playerScore >= 5){
                    winnerMessage = `Congratulations! You won the game!`;
                    gameOver = true;
                }
                document.getElementById('player-stats').textContent= playerScore;
            }
            else if(result === 'lose'){
                let comScore = document.getElementById('com-stats').textContent;
                let newComScore = document.createElement("p");

                comScore=parseInt(comScore);
                comScore++;
                if (comScore >= 5){
                    winnerMessage = 'So sad, you lost the game!';
                    gameOver = true;
                }
                document.getElementById('com-stats').textContent = comScore;
            }


            if(document.getElementById('status') !== null){
                document.getElementById('status').remove();
            }

            let para = document.createElement('p');
            para.appendChild(text);
            para.id = 'status';
            document.getElementById('round-winner').appendChild(para);

            if(gameOver === true){
                    document.getElementById("win-announcment").textContent = winnerMessage;
                }

        }

        document.getElementById('rock').addEventListener('click', function(){
            playRound(options[0],computerPlay())
        });
        document.getElementById('paper').addEventListener('click', function(){
            playRound(options[1],computerPlay())
        });
        document.getElementById('scissors').addEventListener('click', function(){
            playRound(options[2],computerPlay())
        });
    </script>
</body>
</html>